name: Metrics
on:
  schedule: [{cron: "0 0 * * *"}]
  workflow_dispatch:
  push: {branches: ["master", "main"]}
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}

          # --- База ---
          template: classic
          base: header, activity, repositories
          config_timezone: Europe/Minsk
          config_display: large
          config_padding: 0, 10
          config_octicon: yes
          
          # --- Плагины ---
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year

          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_details: lines, percentage
          # Используем ваши цвета
          plugin_languages_colors: "TypeScript:#00ffb9, JavaScript:#00d49a, HTML:#009e76, CSS:#5ec4a8, Rust:#007a5e, MDX:#d4f7ed"
          plugin_languages_limit: 7

          # Исправленные ачивки (компактные и безопасные)
          plugin_achievements: yes
          plugin_achievements_display: compact
          plugin_achievements_secrets: no
          plugin_achievements_threshold: C

          # --- ДИЗАЙН: NEO-BAUHAUS CLEAN ---
          extras_css: |
            /* 1. ГЕОМЕТРИЯ: Строгие углы везде */
            * { 
              border-radius: 0 !important; 
              font-family: 'Arial Black', 'Arial', sans-serif !important;
            }

            /* 2. ФОН: Темный холст */
            svg { 
              background-color: #0d1117 !important; 
            }

            /* 3. ЗАГОЛОВКИ (Эффект плаката) */
            /* Черный текст на мятном фоне — яркий акцент */
            h1, h2, h3 {
              background-color: #00ffb9 !important;
              color: #0d1117 !important;
              padding: 4px 8px !important;
              display: inline-block !important;
              text-transform: uppercase;
              font-weight: 900 !important;
              margin-bottom: 15px !important;
              letter-spacing: 1px;
            }
            
            /* Цвет обычного текста */
            .field, p, span { color: #c9d1d9 !important; }

            /* 4. СТРУКТУРА (Вместо рамок вокруг блоков) */
            .field {
              border: none !important; /* Убираем рамки коробок */
              background: transparent !important;
              box-shadow: none !important;
              padding: 0 !important;
              margin-bottom: 20px !important;
            }
            
            /* Добавляем жирную декоративную линию слева от контента */
            /* Это создает сетку без лишних границ */
            .content {
              border-left: 4px solid #30363d;
              padding-left: 15px !important;
            }

            /* 5. ПРОГРЕСС-БАРЫ (Как цветные блоки) */
            .progress-bar {
              height: 14px !important; /* Толстые блоки */
              background-color: #21262d !important;
              border: none !important;
              margin-bottom: 8px;
            }

            /* 6. КАЛЕНДАРЬ */
            .isocalendar .day { 
              stroke: #0d1117 !important; 
              stroke-width: 1px;
              shape-rendering: crispEdges; /* Убирает сглаживание для четкости */
            }
            
            /* Яркие цвета активности */
            .isocalendar .day.l1 { fill: #0e4429 !important; }
            .isocalendar .day.l2 { fill: #006d32 !important; }
            .isocalendar .day.l3 { fill: #26a641 !important; }
            .isocalendar .day.l4 { fill: #00ffb9 !important; }
            
            /* Иконки */
            .octicon { fill: #00ffb9 !important; }
