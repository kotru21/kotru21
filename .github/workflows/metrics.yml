name: Metrics
on:
  schedule: [{cron: "0 0 * * *"}]
  workflow_dispatch:
  push: {branches: ["master", "main"]}
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}

          # --- База ---
          template: classic
          base: header, activity, repositories
          config_timezone: Europe/Minsk
          config_display: large
          # Увеличили паддинг для "воздуха" вокруг
          config_padding: 10, 10
          config_octicon: yes
          
          # --- Плагины ---
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year

          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_details: lines, percentage
          # Цвета (используем ваши, но CSS их переопределит для стиля)
          plugin_languages_colors: "TypeScript:#00ffb9, JavaScript:#00d49a, HTML:#009e76, CSS:#5ec4a8, Rust:#007a5e, MDX:#d4f7ed"
          plugin_languages_limit: 7

          plugin_achievements: yes
          plugin_achievements_display: compact
          plugin_achievements_secrets: no
          plugin_achievements_threshold: C

          # --- ДИЗАЙН: BAUHAUS GRID SYSTEM ---
          extras_css: |
            /* 1. ГЕОМЕТРИЯ И ШРИФТЫ */
            * { 
              border-radius: 0 !important; 
              font-family: 'Segoe UI', Arial, sans-serif !important;
            }

            /* 2. ФОН */
            svg { 
              background-color: #0d1117 !important; /* Темный фон GitHub */
            }

            /* 3. ЗАГОЛОВКИ (ТЕМНЫЙ ТЕКСТ НА МЯТНОМ) */
            h1, h2, h3 {
              background-color: #00ffb9 !important; /* Мятная плашка */
              color: #0d1117 !important;            /* Темный текст (цвет фона) */
              padding: 5px 10px !important;
              display: inline-block !important;
              text-transform: uppercase;
              font-weight: 800 !important;
              margin: 0 0 10px 0 !important;
              font-size: 14px !important;
              letter-spacing: 1px;
              /* Выравнивание заголовка по левому краю вместе с блоком */
              min-width: 150px; 
              text-align: center;
            }

            /* 4. ИКОНКИ (BAUHAUS STYLE) */
            /* Делаем иконки черными внутри мятного квадрата */
            .field svg.octicon {
              background-color: #00ffb9 !important;
              fill: #0d1117 !important;
              padding: 4px;
              width: 24px !important; 
              height: 24px !important;
              /* Убираем лишние отступы */
              margin-right: 10px;
            }

            /* 5. СТРУКТУРА И ПОЗИЦИОНИРОВАНИЕ (УБИРАЕМ ХАОС) */
            
            /* Контейнер каждого блока */
            .field {
              border: none !important;
              background: transparent !important;
              box-shadow: none !important;
              padding: 15px 0 !important; /* Вертикальные отступы */
              margin: 0 !important;
              /* Горизонтальная линия-разделитель снизу */
              border-bottom: 2px solid #21262d !important; 
            }

            /* Жирная линия слева для всего контента (Ось выравнивания) */
            .content {
              border-left: 5px solid #00ffb9; /* Ось цвета заголовков */
              padding-left: 20px !important;
              margin-left: 5px;
            }

            /* Текст описания */
            .field .content div, p, span { 
              color: #c9d1d9 !important; 
              font-size: 13px;
            }

            /* 6. ПРОГРЕСС-БАРЫ (ЦВЕТНЫЕ БЛОКИ) */
            .progress-bar {
              height: 16px !important;
              background-color: #21262d !important;
              border: none !important;
              margin-bottom: 10px;
            }

            /* 7. КАЛЕНДАРЬ */
            .isocalendar .day { 
              stroke: #0d1117 !important; /* Разделитель цвета фона */
              stroke-width: 1.5px;
              shape-rendering: crispEdges;
            }
            .isocalendar .day.l1 { fill: #0e4429 !important; }
            .isocalendar .day.l2 { fill: #006d32 !important; }
            .isocalendar .day.l3 { fill: #26a641 !important; }
            .isocalendar .day.l4 { fill: #00ffb9 !important; }
